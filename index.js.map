{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCard = imgInfo => {\n    return `<li class=\"card-gallery\">\n    <div class=\"card\">\n    <a class=\"gallery-link\" target=\"_blank\" href=\"${imgInfo.largeImageURL}\">\n    <img class=\"img-gallery\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\"/>\n    </a>\n<div class=\"container-gallery\">\n<div class=\"gallery-items\">\n<p class=\"title-gallery\">Likes</p>\n<p class=\"gallery-item\">${imgInfo.likes}</p>\n</div>\n\n<div class=\"gallery-items\">\n<p class=\"title-gallery\">Views</p>\n<p class=\"gallery-item\">${imgInfo.views}</p>\n</div>\n\n<div class=\"gallery-items\">\n<p class=\"title-gallery\">Comments</p>\n<p class=\"gallery-item\">${imgInfo.comments}</p>\n</div>\n\n<div class=\"gallery-items\">\n<p class=\"title-gallery\">Downloads</p>\n<p class=\"gallery-item\">${imgInfo.downloads}</p>\n</div>\n</div>\n</div>\n    </li>`\n};","import axios from 'axios';\n\nexport const fetchPhotos = (searchQuery, currentPage) => {\n    const axiosOptions = {\n     params: {\n        key: '48321272-90fb434237c8601cd660dced0',\n        q: searchQuery,\n        page: currentPage,\n        per_page: 15,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true'\n        }\n    }\n\n    return axios.get(`https://pixabay.com/api/`, axiosOptions);\n\n}","import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport { createGalleryCard } from './js/render-functions';\nimport { fetchPhotos } from './js/pixabay-api';\n\nconst form = document.querySelector('.form-gallery');\nconst list = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\n\nlet page = 1;\nlet searchQuery = '';\nlet modal = new SimpleLightbox('.gallery a', {\n                captionDelay: 300,\n                captionsData: 'alt',\n            });;\n\nconst searchSubmit = async event => {\n    try {\n     event.preventDefault();\n    searchQuery = event.currentTarget.elements.user_query.value.trim();\n\n    if (searchQuery === '') {\n        iziToast.error({\n            message: 'Please enter your request',\n            position: 'topRight'\n        });\n        return;\n        }\n        page = 1;\n        loadMoreBtn.classList.add('is-hidden');\n    \n        const { data } = await fetchPhotos(searchQuery, page);\n        \n        if (data.total === 0) {\n            form.reset();\n                iziToast.error({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: 'topRight'\n                });\n                \n            list.innerHTML = '';\n            form.reset();\n                return;\n        }\n        \n        if (data.totalHits > 1) {\n            loadMoreBtn.classList.remove('is-hidden');\n            loadMoreBtn.addEventListener('click', loadMoreBtnClick);\n        };\n\n        const galleryTemplate = data.hits.map(el => createGalleryCard(el)).join('');\n\n        list.innerHTML = galleryTemplate;\n\n            modal.refresh();\n    } catch (err) {\n        console.log(err);\n    }\n    form.reset()\n};\nform.addEventListener('submit', searchSubmit);\n\nconst loadMoreBtnClick = async event => {\n    try {\n        page++;\n\n        loader.style.display = 'block';\n\n        const { data } = await fetchPhotos(searchQuery, page);\n\n        const galleryTemplate = data.hits.map(el => createGalleryCard(el)).join('');\n    \n        list.insertAdjacentHTML('beforeend', galleryTemplate);\n        loader.style.display = 'none';\n\n        modal.refresh()\n        \n        if (page * 15 >= data.totalHits) {\n            loadMoreBtn.classList.add('is-hidden');\n            loadMoreBtn.removeEventListener('click', loadMoreBtnClick);\n            iziToast.error({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight'\n        });\n        }\n        scrollDown();\n    } catch (err) {\n        loader.style.display = 'none';\n        console.log(err)\n    }\n}\n\nfunction scrollDown() {\n  let heightCard = document\n    .querySelector('.card-gallery')\n    .getBoundingClientRect().height;\n  window.scrollBy({\n    top: document.body.scrollTop + Math.floor(heightCard * 2),\n    behavior: 'smooth',\n  });\n}\n"],"names":["createGalleryCard","imgInfo","fetchPhotos","searchQuery","currentPage","axiosOptions","axios","form","list","loader","loadMoreBtn","page","modal","SimpleLightbox","searchSubmit","event","iziToast","data","loadMoreBtnClick","galleryTemplate","el","err","scrollDown","heightCard"],"mappings":"owBAAO,MAAMA,EAAoBC,GACtB;AAAA;AAAA,oDAEyCA,EAAQ,aAAa;AAAA,oCACrCA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,0BAKpDA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,0BAKbA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,0BAKbA,EAAQ,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,0BAKhBA,EAAQ,SAAS;AAAA;AAAA;AAAA;AAAA,WCtB9BC,EAAc,CAACC,EAAaC,IAAgB,CACrD,MAAMC,EAAe,CACpB,OAAQ,CACL,IAAK,qCACL,EAAGF,EACH,KAAMC,EACN,SAAU,GACV,WAAY,QACZ,YAAa,aACb,WAAY,MACX,CACJ,EAED,OAAOE,EAAM,IAAI,2BAA4BD,CAAY,CAE7D,ECZME,EAAO,SAAS,cAAc,eAAe,EAC7CC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAGvD,IAAIC,EAAO,EACPR,EAAc,GACdS,EAAQ,IAAIC,EAAe,aAAc,CAC7B,aAAc,IACd,aAAc,KAC9B,CAAa,EAEb,MAAMC,EAAe,MAAMC,GAAS,CAChC,GAAI,CAIJ,GAHCA,EAAM,eAAc,EACrBZ,EAAcY,EAAM,cAAc,SAAS,WAAW,MAAM,OAExDZ,IAAgB,GAAI,CACpBa,EAAS,MAAM,CACX,QAAS,4BACT,SAAU,UACtB,CAAS,EACD,MACC,CACDL,EAAO,EACPD,EAAY,UAAU,IAAI,WAAW,EAErC,KAAM,CAAE,KAAAO,CAAI,EAAK,MAAMf,EAAYC,EAAaQ,CAAI,EAEpD,GAAIM,EAAK,QAAU,EAAG,CAClBV,EAAK,MAAK,EACNS,EAAS,MAAM,CACnB,QAAS,2EACT,SAAU,UACtB,CAAiB,EAELR,EAAK,UAAY,GACjBD,EAAK,MAAK,EACN,MACP,CAEGU,EAAK,UAAY,IACjBP,EAAY,UAAU,OAAO,WAAW,EACxCA,EAAY,iBAAiB,QAASQ,CAAgB,GAG1D,MAAMC,EAAkBF,EAAK,KAAK,IAAIG,GAAMpB,EAAkBoB,CAAE,CAAC,EAAE,KAAK,EAAE,EAE1EZ,EAAK,UAAYW,EAEbP,EAAM,QAAO,CACpB,OAAQS,EAAK,CACV,QAAQ,IAAIA,CAAG,CAClB,CACDd,EAAK,MAAO,CAChB,EACAA,EAAK,iBAAiB,SAAUO,CAAY,EAE5C,MAAMI,EAAmB,MAAMH,GAAS,CACpC,GAAI,CACAJ,IAEAF,EAAO,MAAM,QAAU,QAEvB,KAAM,CAAE,KAAAQ,CAAI,EAAK,MAAMf,EAAYC,EAAaQ,CAAI,EAE9CQ,EAAkBF,EAAK,KAAK,IAAIG,GAAMpB,EAAkBoB,CAAE,CAAC,EAAE,KAAK,EAAE,EAE1EZ,EAAK,mBAAmB,YAAaW,CAAe,EACpDV,EAAO,MAAM,QAAU,OAEvBG,EAAM,QAAS,EAEXD,EAAO,IAAMM,EAAK,YAClBP,EAAY,UAAU,IAAI,WAAW,EACrCA,EAAY,oBAAoB,QAASQ,CAAgB,EACzDF,EAAS,MAAM,CACf,QAAS,6DACT,SAAU,UACtB,CAAS,GAEDM,GACH,OAAQD,EAAK,CACVZ,EAAO,MAAM,QAAU,OACvB,QAAQ,IAAIY,CAAG,CAClB,CACL,EAEA,SAASC,GAAa,CACpB,IAAIC,EAAa,SACd,cAAc,eAAe,EAC7B,sBAAqB,EAAG,OAC3B,OAAO,SAAS,CACd,IAAK,SAAS,KAAK,UAAY,KAAK,MAAMA,EAAa,CAAC,EACxD,SAAU,QACd,CAAG,CACH"}