{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCard = imgInfo => {\n    return `<li class=\"card-gallery\">\n    <div class=\"card\">\n    <a class=\"gallery-link\" target=\"_blank\" href=\"${imgInfo.largeImageURL}\">\n    <img class=\"img-gallery\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\"/>\n    </a>\n<div class=\"container-gallery\">\n<div class=\"gallery-items\">\n<p class=\"title-gallery\">Likes</p>\n<p class=\"gallery-item\">${imgInfo.likes}</p>\n</div>\n\n<div class=\"gallery-items\">\n<p class=\"title-gallery\">Views</p>\n<p class=\"gallery-item\">${imgInfo.views}</p>\n</div>\n\n<div class=\"gallery-items\">\n<p class=\"title-gallery\">Comments</p>\n<p class=\"gallery-item\">${imgInfo.comments}</p>\n</div>\n\n<div class=\"gallery-items\">\n<p class=\"title-gallery\">Downloads</p>\n<p class=\"gallery-item\">${imgInfo.downloads}</p>\n</div>\n</div>\n</div>\n    </li>`\n};","import axios from 'axios';\n\nexport const fetchPhotos = (searchQuery, currentPage) => {\n    const axiosOptions = {\n     params: {\n        key: '48321272-90fb434237c8601cd660dced0',\n        q: searchQuery,\n        page: currentPage,\n        per_page: 15,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true'\n        }\n    }\n\n    return axios.get(`https://pixabay.com/api/`, axiosOptions);\n\n}","import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport { createGalleryCard } from './js/render-functions';\nimport { fetchPhotos } from './js/pixabay-api';\n\nconst form = document.querySelector('.form-gallery');\nconst list = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader-container');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet card = document.querySelector('.card-gallery');\n\n\nlet page = 1;\nlet searchQuery = '';\nlet modal;\n\nconst searchSubmit = async event => {\n    loader.style.display = 'block'\n    try {\n     event.preventDefault();\n    searchQuery = event.currentTarget.elements.user_query.value.trim();\n\n    if (searchQuery === '') {\n        loader.style.display = 'none';\n        iziToast.error({\n            message: 'Please enter your request',\n            position: 'topRight'\n        });\n        return;\n        }\n        page = 1;\n        loadMoreBtn.classList.add('is-hidden');\n    \n        const { data }= await fetchPhotos(searchQuery, page);\n        if (data.total === 0) {\n                iziToast.error({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: 'topRight'\n                });\n                \n                list.innerHTML = '';\n                return;\n        }\n        \n        if (data.totalHits > 1) {\n            loadMoreBtn.classList.remove('is-hidden');\n            loadMoreBtn.addEventListener('click', loadMoreBtnClick);\n        };\n\n        const galleryTemplate = data.hits.map(el => createGalleryCard(el)).join('');\n\n        list.innerHTML = galleryTemplate;\n\n            modal = new SimpleLightbox('.gallery a', {\n                captionDelay: 300,\n                captionsData: 'alt',\n            });\n            modal.refresh();\n    } catch (err) {\n        console.log(err);\n    }\n    loader.style.display = 'none';\n    form.reset()\n};\nform.addEventListener('submit', searchSubmit);\n\nconst loadMoreBtnClick = async event => {\n    try {\n        page++;\n\n        const { data } = await fetchPhotos(searchQuery, page);\n\n        const galleryTemplate = data.hits.map(el => createGalleryCard(el)).join('');\n        modal = new SimpleLightbox('.gallery a', {\n                captionDelay: 300,\n                captionsData: 'alt',\n            });\n        list.insertAdjacentHTML('beforeend', galleryTemplate);\n\n        modal.refresh()\n        \n        if (page === data.totalHits) {\n            loadMoreBtn.classList.add('is-hidden');\n            loadMoreBtn.removeEventListener('click', loadMoreBtnClick);\n            iziToast.error({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight'\n        });\n        }\n        scrollDown();\n    } catch (err) {\n        console.log(err)\n    }\n}\n\nfunction scrollDown() {\n  let heightCard = document\n    .querySelector('.card-gallery')\n    .getBoundingClientRect().height;\n  window.scrollBy({\n    top: document.body.scrollTop + Math.floor(heightCard * 2),\n    behavior: 'smooth',\n  });\n}\n"],"names":["createGalleryCard","imgInfo","fetchPhotos","searchQuery","currentPage","axiosOptions","axios","form","list","loader","loadMoreBtn","page","modal","searchSubmit","event","iziToast","data","loadMoreBtnClick","galleryTemplate","el","SimpleLightbox","err","scrollDown","heightCard"],"mappings":"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"}